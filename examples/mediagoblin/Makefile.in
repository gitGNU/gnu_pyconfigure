
VPATH = @srcdir@
PACKAGE_BUGREPORT = @PACKAGE_BUGREPORT@
PACKAGE_NAME = @PACKAGE_NAME@
PACKAGE_STRING = @PACKAGE_STRING@
PACKAGE_TARNAME = @PACKAGE_TARNAME@
PACKAGE_URL = @PACKAGE_URL@
PACKAGE_VERSION = @PACKAGE_VERSION@
PATH_SEPARATOR = @PATH_SEPARATOR@
PYTHON = @PYTHON@
VIRTUALENV = @VIRTUALENV@
SPHINXBUILD = @SPHINXBUILD@
SHELL = @SHELL@
INSTALL = @INSTALL@
INSTALL_PROGRAM = $(INSTALL)
INSTALL_DATA = ${INSTALL} -m 644
docdir = @docdir@
dvidir = @dvidir@
exec_prefix = @exec_prefix@
htmldir = @htmldir@
includedir = @includedir@
infodir = @infodir@
prefix = @prefix@
srcdir = @srcdir@
pkgpythondir = @pkgpythondir@
pkgpyexecdir = @pkgpyexecdir@


all: install

.PHONY: all install uninstall distclean info install-html html install-pdf pdf install-dvi dvi install-ps ps clean dist check

install:
	$(NORMAL_INSTALL)
ifneq ($VIRTUALENV, no)
	$(VIRTUALENV) $(VIRTUALENV_FLAGS) $(DESTDIR)$(prefix) || virtualenv $(DESTDIR)$(prefix)
	$(DESTDIR)$(prefix)/bin/python $(srcdir)/setup.py develop --prefix=$(DESTDIR)$(prefix)
else
	$(PYTHON) $(srcdir)setup.py develop --prefix=$(DESTDIR)$(prefix)
endif
	$(INSTALL_PROGRAM) $(srcdir)/lazyserver.sh $(DESTDIR)$(datadir)
	$(INSTALL_PROGRAM) $(srcdir)/lazycelery.sh $(DESTDIR)$(datadir)
	$(INSTALL_PROGRAM) $(srcdir)/lazystarter.sh $(DESTDIR)$(datadir)
	$(INSTALL_DATA) $(srcdir)/mediagoblin.ini $(DESTDIR)$(datadir)
	$(INSTALL_DATA) $(srcdir)/paste.ini $(DESTDIR)$(datadir)


uninstall: $(wildcard $(srcdir)/docs/source/*)
	rm -rf $(DESTDIR)$(datadir)
	rm -rf $(DESTDIR)$(htmldir)
	rm -rf $(DESTDIR)$(pdfdir)


clean:
	$(PYTHON) setup.py clean


distclean: $(wildcard $(srcdir)/docs/source/*)
	rm $(srcdir)/config.log
	rm $(srcdir)/config.status


$(DESTDIR)$(infodir)/gnumediagoblin.info: docs/build/texinfo/gnumediagoblin.info
	$(POST_INSTALL)
	$(INSTALL_DATA) @< $(DESTDIR)$@
	if $(SHELL) -c 'install-info --version' >/dev/null 2>&1; then
		install-info --dir-file=$(DESTDIR)$(infodir)/dir \
				$(DESTDIR)$(infodir)/gnumediagoblin.info;
	else true; fi

info: docs/build/texinfo/gnumediagoblin.info

docs/build/texinfo/gnumediagoblin.info: $(wildcard docs/source/*)
ifneq ($SPHINX_BUILD, no)
	$(MAKE) -C docs info SPHINXBUILD=$(SPHINXBUILD)
endif


install-html: html
	$(INSTALL_DATA) docs/build/html/* $(DESTDIR)$(htmldir)

html: docs/build/html/index.html

docs/build/html/index.html: $(wildcard $(srcdir)/docs/source/*)
ifneq ($SPHINX_BUILD, no)
	$(MAKE) -C docs html SPHINXBUILD=$(SPHINXBUILD)
endif


install-pdf: pdf
	$(INSTALL_DATA) docs/build/latex/GNUMediaGoblin.pdf $(DESTDIR)$(pdfdir)

pdf: docs/build/latex/GNUMediaGoblin.pdf

docs/build/latex/GNUMediaGoblin.pdf: $(wildcard $(srcdir)/docs/source/*)
ifneq ($SPHINX_BUILD, no)
	$(MAKE) -C docs latexpdf SPHINXBUILD=$(SPHINXBUILD)
endif


install-dvi:

dvi:

install-ps:

ps:


dist:
	$(PYTHON) setup.py sdist

check:
	$(PYTHON) setup.py check
